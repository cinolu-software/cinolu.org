import{a as pe}from"./chunk-PI6UN3PY.js";import{a as re,b as oe,c as ae,d as le,e as me}from"./chunk-SWMRD23A.js";import{a as O,b as R,f as P,g as U,h as q,i as W,j as H}from"./chunk-MDYXPNFM.js";import{I as Y,J as $}from"./chunk-IJY23CRN.js";import{a as se}from"./chunk-ZS33IQ3M.js";import"./chunk-UA3S6KA6.js";import{b as J,d as x,f as K,g as Q,i as X,k as Z,l as ee,n as te,o as ie,p as ne,q as ce}from"./chunk-REMKL6EY.js";import{s as b}from"./chunk-RJ64CUNQ.js";import{a as de}from"./chunk-72SGUU4P.js";import{b as j,e as z,f as D}from"./chunk-QZSVKQ4V.js";import"./chunk-CJPJA73S.js";import{$b as L,Eb as h,Fa as f,Ga as g,Ha as C,Ia as E,Kb as s,Nb as F,Pb as c,Qb as M,Sb as k,Tb as A,Ub as t,Vb as e,Wb as r,Yb as T,_b as v,fd as G,ic as _,jc as a,lc as V,nc as N,ob as n,oc as B,pa as p,va as I}from"./chunk-W4SA2WF3.js";var ue=()=>["/sign-up"];function fe(i,o){if(i&1&&(t(0,"fuse-alert",8),a(1),e()),i&2){let w=L();s("showIcon",!0)("@shake",!0),n(),V(" ",w.error," ")}}function ge(i,o){i&1&&r(0,"mat-icon",14),i&2&&s("svgIcon","heroicons_solid:eye")}function he(i,o){i&1&&r(0,"mat-icon",14),i&2&&s("svgIcon","heroicons_solid:eye-slash")}function ve(i,o){i&1&&(t(0,"span"),a(1,"Se connecter"),e())}function xe(i,o){i&1&&r(0,"mat-progress-spinner",16),i&2&&s("diameter",24)("mode","indeterminate")}function we(i,o){if(i&1&&(t(0,"div",39),r(1,"img",41),e()),i&2){let w=o.$implicit;n(),s("ngSrc",w.image)}}var qe=(()=>{let o=class o{constructor(){this.isLoading=!1,this.error=null,this.team=pe,this._authService=p(de),this._formBuilder=p(te),this._subscription=null,this._route=p(j),this._router=p(z),this.token=this._route.snapshot.queryParams.token}resetState(){this.error=null,this.isLoading=!1,this.signInForm.enable()}enableLoading(){this.isLoading=!0,this.signInForm.disable()}verifyEmail(){this.signInForm.disable(),this._subscription=this._authService.verifyEmail(this.token).subscribe({next:({access_token:m})=>{this.signInForm.enable(),this._authService.storeToken(m),this._router.navigate(["/"])},error:m=>{this.error=m.error.message,this.signInForm.enable()}})}ngOnInit(){this.signInForm=this._formBuilder.group({email:["",[x.required,x.email]],password:["",x.required]}),this.token&&this.verifyEmail()}signIn(){this.signInForm.invalid||(this.enableLoading(),this._subscription=this._authService.signIn(this.signInForm.value).subscribe({next:({access_token:m})=>{this.resetState(),this._authService.storeToken(m),window.location.replace(b.accountUrl+"sign-in?token="+m)},error:m=>{this.resetState(),this.error=m.error.message,this.signInForm.enable()}}))}signinWithGoogle(){window.location.replace(b.apiUrl+"auth/sign-in")}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}};o.\u0275fac=function(u){return new(u||o)},o.\u0275cmp=I({type:o,selectors:[["auth-sign-in"]],standalone:!0,features:[N],decls:63,vars:15,consts:[["passwordField",""],[1,"flex","min-w-0","min-h-screen","flex-auto","flex-col","items-center","sm:flex-row","sm:justify-center","md:items-center","md:justify-center"],[1,"w-full","px-4","sm:bg-card","sm:w-auto","sm:rounded-2xl","sm:shadow","md:flex","md:h-full","md:w-1/2","md:items-center","md:justify-center","md:rounded-none","md:p-16","md:shadow-none"],[1,"mx-auto","w-full","max-w-80","sm:mx-0","sm:w-80"],[1,"mt-8","text-3xl","font-extrabold","leading-tight","tracking-tight","font-satoshi"],[1,"flex-col","gap-3"],[1,"mt-0.5","relative","flex","items-baseline","font-medium"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],["appearance","soft","type","error",1,"mt-6",3,"showIcon"],[3,"formGroup"],[1,"w-full"],["id","email","type","email","matInput","","autocomplete","email",3,"formControlName"],["id","password","matInput","","type","password","autocomplete","off",3,"formControlName"],["mat-icon-button","","type","button","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","w-full","text-white",3,"click","color","disabled"],[3,"diameter","mode"],[1,"mt-8","flex","items-center"],[1,"mt-px","flex-auto","border-t"],[1,"text-secondary","mx-2"],[1,"mt-8","flex","items-center","space-x-4"],["type","button","mat-stroked-button","",1,"flex-auto",3,"click"],[1,"flex","items-center","gap-1.5"],[1,"relative","h-5","w-5"],["ngSrc","/images/logo/google.svg","alt","Google","fill",""],[1,"relative","h-full","hidden","w-1/2","flex-auto","items-center","justify-center","overflow-hidden","bg-green-800","p-16","md:flex","lg:px-28"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-green-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],["viewBox","0 0 220 192","width","220","height","192","fill","none",1,"absolute","-top-16","-right-16","text-green-700"],["id","837c3e70-6c3a-44e6-8854-cc48c737b659","x","0","y","0","width","20","height","20","patternUnits","userSpaceOnUse"],["x","0","y","0","width","4","height","4","fill","currentColor"],["width","220","height","192","fill","url(#837c3e70-6c3a-44e6-8854-cc48c737b659)"],[1,"relative","z-10","w-full","max-w-2xl"],[1,"text-5xl","font-bold","leading-none","text-gray-100"],[1,"mt-6","text-lg","leading-6","tracking-tight","text-gray-400"],[1,"mt-8","flex","gap-3","items-center"],[1,"flex","items-center","-space-x-1.5"],[1,"relative","h-10","w-10"],[1,"font-medium","tracking-tight","text-green-400"],["fill","",1,"h-10","w-10","flex-0","rounded-full","object-cover","ring-4","ring-primary-900","ring-offset-1","ring-offset-primary-900",3,"ngSrc"]],template:function(u,l){if(u&1){let d=T();t(0,"div",1),r(1,"app-topbar"),t(2,"div",2)(3,"div",3)(4,"div",4),a(5,"Se connecter"),e(),t(6,"div",5)(7,"div",6)(8,"p"),a(9,"Vous n'avez pas de compte?"),e(),t(10,"a",7),a(11,"S'inscrire"),e()(),h(12,fe,2,3,"fuse-alert",8),e(),t(13,"form",9)(14,"mat-form-field",10)(15,"mat-label"),a(16,"Adresse e-mail"),e(),r(17,"input",11),e(),t(18,"mat-form-field",10)(19,"mat-label"),a(20,"Mot de passe"),e(),r(21,"input",12,0),t(23,"button",13),v("click",function(){f(d);let S=_(22);return g(S.type==="password"?S.type="text":S.type="password")}),h(24,ge,1,1,"mat-icon",14)(25,he,1,1,"mat-icon",14),e()(),t(26,"button",15),v("click",function(){return f(d),g(l.signIn())}),h(27,ve,2,0,"span")(28,xe,1,2,"mat-progress-spinner",16),e(),t(29,"div",17),r(30,"div",18),t(31,"div",19),a(32,"Ou continuer avec"),e(),r(33,"div",18),e(),t(34,"div",20)(35,"button",21),v("click",function(){return f(d),g(l.signinWithGoogle())}),t(36,"div",22)(37,"div",23),r(38,"img",24),e(),a(39," Google "),e()()()()()(),t(40,"div",25),C(),t(41,"svg",26)(42,"g",27),r(43,"circle",28)(44,"circle",29),e()(),t(45,"svg",30)(46,"defs")(47,"pattern",31),r(48,"rect",32),e()(),r(49,"rect",33),e(),E(),t(50,"div",34)(51,"div",35)(52,"h4"),a(53,"Content de vous revoir !"),e()(),t(54,"div",36)(55,"p"),a(56," Connectez-vous pour acc\xE9der \xE0 votre compte et continuer \xE0 explorer notre plateforme et la richesse de nos services. "),e()(),t(57,"div",37)(58,"div",38),k(59,we,2,1,"div",39,M),e(),t(61,"p",40),a(62,"Plus de 1000 utilisateurs"),e()()()()()}if(u&2){let d=_(22);n(10),s("routerLink",B(14,ue)),n(2),c(l.error?12:-1),n(),F(l.error?"transition-transform translate-y-4 duration-150":"mt-8 "),s("formGroup",l.signInForm),n(4),s("formControlName","email"),n(4),s("formControlName","password"),n(3),c(d.type==="password"?24:-1),n(),c(d.type==="text"?25:-1),n(),s("color","primary")("disabled",l.isLoading||l.signInForm.invalid||l.signInForm.disabled),n(),c(!l.isLoading&&!l.signInForm.invalid?27:-1),n(),c(l.isLoading?28:-1),n(31),A(l.team.slice(0,5))}},dependencies:[D,me,ie,X,J,K,Q,ne,Z,ee,U,P,O,R,oe,re,H,q,W,$,Y,le,ae,G,ce],encapsulation:2,data:{animation:se}});let i=o;return i})();export{qe as AuthSignInComponent};
