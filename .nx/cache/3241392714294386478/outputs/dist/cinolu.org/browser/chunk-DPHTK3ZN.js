import{F as a,O as u,Ra as l,Sa as d,d as c,j as b,pb as v,xa as h}from"./chunk-W4SA2WF3.js";var w=(()=>{let r=class r{constructor(e){this.element=e,this.debounceTime=l(0),this.subject$=new b}ngOnInit(){this.createObserver()}ngAfterViewInit(){this.startObservingElements()}ngOnDestroy(){this.observer&&(this.observer.disconnect(),this.observer=void 0),this.subject$.unsubscribe()}isVisible(e){return new Promise(t=>{let i=new IntersectionObserver(([s])=>{t(s.intersectionRatio===1),i.disconnect()});i.observe(e)})}createObserver(){let e={rootMargin:"0px",threshold:.1};if(typeof window>"u")return;let t=i=>i.isIntersecting||i.intersectionRatio>0;this.observer=new IntersectionObserver((i,s)=>{i.forEach(o=>{t(o)&&this.subject$.next({entry:o,observer:s})})},e)}startObservingElements(){this.observer&&(this.observer.observe(this.element.nativeElement),this.subject$.pipe(u(this.debounceTime()),a(Boolean)).subscribe(i=>c(this,[i],function*({entry:e,observer:t}){let s=e.target;s.classList.replace("hidde","show"),(yield this.isVisible(s))&&t.unobserve(s)})))}};r.\u0275fac=function(t){return new(t||r)(v(d))},r.\u0275dir=h({type:r,selectors:[["","observeVisibility",""]],inputs:{debounceTime:[1,"debounceTime"]},standalone:!0});let n=r;return n})();export{w as a};
