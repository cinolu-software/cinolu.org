import './polyfills.server.mjs';
import{a as ne,b as re,c as oe,d as ae,e as se}from"./chunk-K7U5VKD6.mjs";import{a as z,b as D,f as O,g as P,h as q,i as U,j as W}from"./chunk-66IISUXY.mjs";import{I as H,J as Y}from"./chunk-WXC7JIKC.mjs";import{a as le}from"./chunk-GNRFZ7Z4.mjs";import{a as pe}from"./chunk-W7FC5MD3.mjs";import"./chunk-OWLXV6AX.mjs";import{b as $,d as x,f as J,g as K,i as Q,j as X,k as Z,m as ee,n as te,o as ie,p as de}from"./chunk-O3ZTU7PU.mjs";import{s as me}from"./chunk-TQDUTB2A.mjs";import{a as ce}from"./chunk-Z7EP25F6.mjs";import{b as G,f as R,g as j}from"./chunk-LM4X5J6Y.mjs";import"./chunk-QX3ZCOTK.mjs";import{Ba as f,Ca as g,Cb as h,Da as E,Ea as C,Ib as s,Lb as F,Nb as d,Ob as k,Qb as M,Rb as A,Sb as t,Tb as e,Ub as o,Wb as T,Yb as v,Zb as L,gc as y,hc as r,jc as V,la as p,lc as N,mb as n,mc as b,od as B,ra as I}from"./chunk-KSSE3HF4.mjs";import"./chunk-5XUXGTUW.mjs";var ue=()=>["/sign-up"],fe=()=>["/forgot-password"];function ge(i,a){if(i&1&&(t(0,"fuse-alert",7),r(1),e()),i&2){let _=L();s("showIcon",!0)("@shake",!0),n(),V(" ",_.error," ")}}function he(i,a){i&1&&o(0,"mat-icon",13),i&2&&s("svgIcon","heroicons_solid:eye")}function ve(i,a){i&1&&o(0,"mat-icon",13),i&2&&s("svgIcon","heroicons_solid:eye-slash")}function xe(i,a){i&1&&(t(0,"span"),r(1,"Se connecter"),e())}function _e(i,a){i&1&&o(0,"mat-progress-spinner",17),i&2&&s("diameter",24)("mode","indeterminate")}function Se(i,a){if(i&1&&(t(0,"div",39),o(1,"img",41),e()),i&2){let _=a.$implicit;n(),s("ngSrc",_.image)}}var Ue=(()=>{let a=class a{constructor(){this.isLoading=!1,this.error=null,this.team=pe,this._authService=p(ce),this._formBuilder=p(ee),this._subscription=null,this._route=p(G),this._router=p(R),this._token=this._route.snapshot.queryParams.token,this.signInForm=this._formBuilder.group({email:["",[x.required,x.email]],password:["",x.required]}),this._token&&this.verifyEmail()}verifyEmail(){this.signInForm.enable(),this._subscription=this._authService.verifyEmail(this._token).subscribe({next:({access_token:m})=>{this._authService.storeToken(m),this._router.navigate(["/"])},error:m=>{this.error=m.error.message,this.signInForm.enable()}})}signIn(){this.signInForm.invalid||(this.isLoading=!0,this.error=null,this.signInForm.disable(),this._subscription=this._authService.signIn(this.signInForm.value).subscribe({next:({access_token:m})=>{this._authService.storeToken(m),this._router.navigate(["/"])},error:m=>{this.isLoading=!1,this.error=m.error.message,this.signInForm.enable()}}))}signinWithGoogle(){window.location.replace(me.apiUrl+"auth/sign-in")}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}};a.\u0275fac=function(u){return new(u||a)},a.\u0275cmp=I({type:a,selectors:[["auth-sign-in"]],standalone:!0,features:[N],decls:66,vars:17,consts:[["passwordField",""],[1,"grid","grid-cols-1","lg:grid-cols-2","bg-white"],[1,"min-h-screen","flex","flex-col","items-start","justify-center","px-8","md:px-8","lg:px-32"],[1,"flex","flex-col","items-start"],[1,"text-3xl","font-extrabold","leading-tight","tracking-tight","font-satoshi"],[1,"flex","items-center","gap-1.5"],[1,"text-primary-500","hover:underline",3,"routerLink"],["appearance","soft","type","error",1,"mt-6",3,"showIcon"],[3,"formGroup"],[1,"w-full"],["id","email","type","email","matInput","","autocomplete","email",3,"formControlName"],["id","password","matInput","","type","password","autocomplete","off",3,"formControlName"],["mat-icon-button","","type","button","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"inline-flex","w-full","items-center","justify-between"],[1,"text-md","font-medium","text-primary-500","hover:underline",3,"routerLink"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","w-full","text-white",3,"click","color","disabled"],[3,"diameter","mode"],[1,"mt-8","flex","items-center"],[1,"mt-px","flex-auto","border-t"],[1,"text-secondary","mx-2"],[1,"mt-8","flex","items-center","space-x-4"],["type","button","mat-stroked-button","",1,"flex-auto",3,"click"],[1,"relative","h-5","w-5"],["ngSrc","/images/logo/google.svg","alt","Google","fill",""],[1,"relative","min-h-screen","hidden","items-center","justify-center","overflow-hidden","bg-green-800","p-16","md:flex","lg:px-28"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-green-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],["viewBox","0 0 220 192","width","220","height","192","fill","none",1,"absolute","-top-16","-right-16","text-green-700"],["id","837c3e70-6c3a-44e6-8854-cc48c737b659","x","0","y","0","width","20","height","20","patternUnits","userSpaceOnUse"],["x","0","y","0","width","4","height","4","fill","currentColor"],["width","220","height","192","fill","url(#837c3e70-6c3a-44e6-8854-cc48c737b659)"],[1,"relative","z-10","w-full","max-w-2xl"],[1,"text-4xl","font-bold","leading-none","text-gray-100"],[1,"mt-6","text-lg","leading-6","tracking-tight","text-gray-400"],[1,"mt-8","flex","gap-3","items-center"],[1,"flex","items-center","-space-x-1.5"],[1,"relative","h-10","w-10"],[1,"font-medium","tracking-tight","text-green-400"],["fill","",1,"h-10","w-10","flex-0","rounded-full","object-cover","ring-4","ring-primary-900","ring-offset-1","ring-offset-primary-900",3,"ngSrc"]],template:function(u,l){if(u&1){let c=T();o(0,"app-topbar"),t(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),r(5,"Se connecter"),e(),t(6,"div",5)(7,"p"),r(8,"Vous n'avez pas de compte?"),e(),t(9,"a",6),r(10,"S'inscrire"),e()(),h(11,ge,2,3,"fuse-alert",7),e(),t(12,"form",8)(13,"mat-form-field",9)(14,"mat-label"),r(15,"Adresse e-mail"),e(),o(16,"input",10),e(),t(17,"mat-form-field",9)(18,"mat-label"),r(19,"Mot de passe"),e(),o(20,"input",11,0),t(22,"button",12),v("click",function(){f(c);let S=y(21);return g(S.type==="password"?S.type="text":S.type="password")}),h(23,he,1,1,"mat-icon",13)(24,ve,1,1,"mat-icon",13),e()(),t(25,"div",14),r(26," Mot de passe oubli\xE9? "),t(27,"a",15),r(28," R\xE9initialiser "),e()(),t(29,"button",16),v("click",function(){return f(c),g(l.signIn())}),h(30,xe,2,0,"span")(31,_e,1,2,"mat-progress-spinner",17),e(),t(32,"div",18),o(33,"div",19),t(34,"div",20),r(35,"Ou continuer avec"),e(),o(36,"div",19),e(),t(37,"div",21)(38,"button",22),v("click",function(){return f(c),g(l.signinWithGoogle())}),t(39,"div",5)(40,"div",23),o(41,"img",24),e(),r(42," Google "),e()()()()(),t(43,"div",25),E(),t(44,"svg",26)(45,"g",27),o(46,"circle",28)(47,"circle",29),e()(),t(48,"svg",30)(49,"defs")(50,"pattern",31),o(51,"rect",32),e()(),o(52,"rect",33),e(),C(),t(53,"div",34)(54,"div",35)(55,"h4"),r(56,"Connectez-vous !"),e()(),t(57,"div",36)(58,"p"),r(59,"Acc\xE9der \xE0 votre compte et continuer \xE0 explorer notre plateforme."),e()(),t(60,"div",37)(61,"div",38),M(62,Se,2,1,"div",39,k),e(),t(64,"p",40),r(65,"Plus de 1000 utilisateurs"),e()()()()()}if(u&2){let c=y(21);n(9),s("routerLink",b(15,ue)),n(2),d(l.error?11:-1),n(),F(l.error?"transition-transform translate-y-4 duration-150":"mt-8 "),s("formGroup",l.signInForm),n(4),s("formControlName","email"),n(4),s("formControlName","password"),n(3),d(c.type==="password"?23:-1),n(),d(c.type==="text"?24:-1),n(3),s("routerLink",b(16,fe)),n(2),s("color","primary")("disabled",l.isLoading||l.signInForm.invalid||l.signInForm.disabled),n(),d(!l.isLoading&&!l.signInForm.invalid?30:-1),n(),d(l.isLoading?31:-1),n(31),A(l.team.slice(0,5))}},dependencies:[j,se,te,Q,$,J,K,ie,X,Z,P,O,z,D,re,ne,W,q,U,Y,H,ae,oe,B,de],encapsulation:2,data:{animation:le}});let i=a;return i})();export{Ue as AuthSignInComponent};
