import{a as te,b as ie,c as oe,d as re,e as se}from"./chunk-BR34NZ3L.js";import{a as B,b as z,f as D,g as G,h as j,i as q,j as O}from"./chunk-MDYXPNFM.js";import{I as U,J as H}from"./chunk-IJY23CRN.js";import{a as ne}from"./chunk-ZS33IQ3M.js";import{a as le}from"./chunk-PI6UN3PY.js";import"./chunk-UA3S6KA6.js";import{b as Y,d as C,f as $,g as J,i as K,j as Q,k as W,m as X,n as Z,o as ee,p as me}from"./chunk-ODGR6PEQ.js";import"./chunk-RJ64CUNQ.js";import{a as ae}from"./chunk-L3OFGHDO.js";import{b as L,e as N}from"./chunk-QZSVKQ4V.js";import"./chunk-CJPJA73S.js";import{$b as R,$c as I,Eb as h,Fa as g,Ga as v,Ha as S,Ia as P,Kb as s,Pb as d,Qb as M,Sb as E,Tb as F,Ub as i,Vb as t,Wb as n,Yb as k,_b as _,fd as V,ic as w,jc as a,lc as A,nc as T,ob as r,pa as f,va as b}from"./chunk-W4SA2WF3.js";function de(e,o){if(e&1&&(i(0,"div",7)(1,"fuse-alert",31),a(2),t()()),e&2){let x=R();r(),s("@shake",!0),r(),A(" ",x.error," ")}}function pe(e,o){e&1&&n(0,"mat-icon",11),e&2&&s("svgIcon","heroicons_solid:eye")}function ce(e,o){e&1&&n(0,"mat-icon",11),e&2&&s("svgIcon","heroicons_solid:eye-slash")}function ue(e,o){e&1&&n(0,"mat-icon",11),e&2&&s("svgIcon","heroicons_solid:eye")}function fe(e,o){e&1&&n(0,"mat-icon",11),e&2&&s("svgIcon","heroicons_solid:eye-slash")}function he(e,o){e&1&&(i(0,"span"),a(1,"R\xE9initialiser "),t())}function we(e,o){e&1&&n(0,"mat-progress-spinner",14),e&2&&s("diameter",24)("mode","indeterminate")}function ge(e,o){if(e&1&&(i(0,"div",29),n(1,"img",32),t()),e&2){let x=o.$implicit;r(),s("ngSrc",x.image)}}var qe=(()=>{let o=class o{constructor(){this.isLoading=!1,this.error=null,this.team=le,this._formBuilder=f(X),this._activatedRoute=f(L),this._router=f(N),this._authService=f(ae),this.token=this._activatedRoute.snapshot.queryParams.token,this._subscription=null,this.resetPasswordForm=this._formBuilder.group({password:["",C.required],password_confirm:["",C.required]})}resetPassword(){if(!this.resetPasswordForm.invalid){this.isLoading=!0,this.error=null,this.resetPasswordForm.disable();let y={token:this.token,password:this.resetPasswordForm.value.password,password_confirm:this.resetPasswordForm.value.password_confirm};this._subscription=this._authService.resetPassword(y).subscribe({next:({access_token:l})=>{this.isLoading=!1,this._authService.storeToken(l),this._router.navigate(["/"])},error:l=>{this.isLoading=!1,this.error=l.error.message,this.resetPasswordForm.enable()}})}}ngOnDestroy(){this._subscription?.unsubscribe()}};o.\u0275fac=function(l){return new(l||o)},o.\u0275cmp=b({type:o,selectors:[["auth-reset-password"]],standalone:!0,features:[T],decls:52,vars:11,consts:[["passwordField",""],["passwordConfirm",""],[1,"grid","grid-cols-1","lg:grid-cols-2","bg-white"],[1,"min-h-screen","flex","flex-col","items-start","justify-center","px-8","md:px-8","lg:px-32"],[1,"flex","flex-col","items-start"],[1,"text-2xl","font-extrabold","leading-tight","tracking-tight","font-satoshi"],[1,"mt-1.5"],[1,"w-full"],[1,"mt-8",3,"formGroup"],["id","password","matInput","","type","password","autocomplete","off",3,"formControlName"],["mat-icon-button","","type","button","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],["id","password_confirm","matInput","","type","password","autocomplete","off","formControlName","password_confirm"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","w-full","text-white",3,"click","color","disabled"],[3,"diameter","mode"],[1,"relative","min-h-screen","hidden","items-center","justify-center","overflow-hidden","bg-green-800","p-16","md:flex","lg:px-28"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-green-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],["viewBox","0 0 220 192","width","220","height","192","fill","none",1,"absolute","-top-16","-right-16","text-green-700"],["id","837c3e70-6c3a-44e6-8854-cc48c737b659","x","0","y","0","width","20","height","20","patternUnits","userSpaceOnUse"],["x","0","y","0","width","4","height","4","fill","currentColor"],["width","220","height","192","fill","url(#837c3e70-6c3a-44e6-8854-cc48c737b659)"],[1,"relative","z-10","w-full","max-w-2xl"],[1,"text-4xl","font-bold","leading-none","text-gray-100"],[1,"mt-6","text-lg","leading-6","tracking-tight","text-gray-400"],[1,"mt-8","flex","gap-3","items-center"],[1,"flex","items-center","-space-x-1.5"],[1,"relative","h-10","w-10"],[1,"font-medium","tracking-tight","text-green-400"],["appearance","soft","type","error",1,"mt-6"],["fill","",1,"h-10","w-10","flex-0","rounded-full","object-cover","ring-4","ring-primary-900","ring-offset-1","ring-offset-primary-900",3,"ngSrc"]],template:function(l,m){if(l&1){let c=k();n(0,"app-topbar"),i(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2",5),a(5," R\xE9initialisation du mot de passe "),t(),i(6,"p",6),a(7,"Veuillez saisir votre nouveau mot de passe pour r\xE9initialiser votre compte."),t(),h(8,de,3,2,"div",7),t(),i(9,"form",8)(10,"mat-form-field",7)(11,"mat-label"),a(12,"Nouveau mot de passe"),t(),n(13,"input",9,0),i(15,"button",10),_("click",function(){g(c);let p=w(14);return v(p.type==="password"?p.type="text":p.type="password")}),h(16,pe,1,1,"mat-icon",11)(17,ce,1,1,"mat-icon",11),t()(),i(18,"mat-form-field",7)(19,"mat-label"),a(20,"Confirmer le mot de passe"),t(),n(21,"input",12,1),i(23,"button",10),_("click",function(){g(c);let p=w(22);return v(p.type==="password"?p.type="text":p.type="password")}),h(24,ue,1,1,"mat-icon",11)(25,fe,1,1,"mat-icon",11),t()(),i(26,"button",13),_("click",function(){return g(c),v(m.resetPassword())}),h(27,he,2,0,"span")(28,we,1,2,"mat-progress-spinner",14),t()()(),i(29,"div",15),S(),i(30,"svg",16)(31,"g",17),n(32,"circle",18)(33,"circle",19),t()(),i(34,"svg",20)(35,"defs")(36,"pattern",21),n(37,"rect",22),t()(),n(38,"rect",23),t(),P(),i(39,"div",24)(40,"div",25)(41,"h4"),a(42,"Connectez-vous !"),t()(),i(43,"div",26)(44,"p"),a(45,"Acc\xE9der \xE0 votre compte et continuer \xE0 explorer notre plateforme."),t()(),i(46,"div",27)(47,"div",28),E(48,ge,2,1,"div",29,M),t(),i(50,"p",30),a(51,"Plus de 1000 utilisateurs"),t()()()()()}if(l&2){let c=w(14),u=w(22);r(8),d(m.error?8:-1),r(),s("formGroup",m.resetPasswordForm),r(4),s("formControlName","password"),r(3),d(c.type==="password"?16:-1),r(),d(c.type==="text"?17:-1),r(7),d(u.type==="password"?24:-1),r(),d(u.type==="text"?25:-1),r(),s("color","primary")("disabled",m.isLoading||m.resetPasswordForm.invalid),r(),d(!m.isLoading&&!m.resetPasswordForm.invalid?27:-1),r(),d(m.isLoading?28:-1),r(20),F(m.team.slice(0,5))}},dependencies:[se,Z,K,Y,$,J,ee,Q,W,G,D,B,z,ie,te,O,j,q,H,U,re,oe,me,I,V],encapsulation:2,data:{animation:ne}});let e=o;return e})();export{qe as AuthResetPasswordComponent};
