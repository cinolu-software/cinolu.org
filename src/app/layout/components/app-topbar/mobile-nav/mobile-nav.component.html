<div class="lg:hidden">
  @let user = authStore.user();
  <button (click)="toggleNav()">
    <i-lucide [name]="isOpen() ? icons.close : icons.menu" class="size-6" />
  </button>
  <div
    class="fixed top-16 rounded-md left-8 right-8 bottom-1/3 -translate-x-[100vw] bg-white transition-transform duration-300"
    [ngClass]="isOpen() ? 'translate-x-0 active-nav' : ''"
  >
    <div
      class="flex flex-col justify-between py-10 px-10 text-lg h-full text-gray-900"
    >
      <div class="flex flex-col gap-4 font-medium menu">
        @for (link of links(); track $index) {
        <a
          [routerLink]="link.path"
          [fragment]="link.fragment"
          class="flex items-center gap-2.5 group"
          (click)="toggleNav()"
        >
          {{ link.name }}
        </a>
        }
      </div>
      @if (user) {
      <div class="flex flex-col gap-8 text-gray-900">
        <a [routerLink]="'/dashboard'" class="flex items-center gap-2.5">
          <img
            [ngSrc]="user | apiIMG : 'user'"
            alt="Profile picture"
            width="32"
            height="32"
            class="rounded-full aspect-video object-cover w-8 h-8 ring-2 ring-primary-800 ring-offset-1"
          />
          <p class="font-semibold">{{ user?.name }}</p>
        </a>
        <button
          class="flex items-center text-white justify-center text-center px-6 py-2 bg-red-800 rounded-sm hover:bg-red-900 disabled:bg-red-800/30 transition-colors duration-300 gap-1.5 font-medium"
          (click)="onSignOut()"
        >
          Se dÃ©connecter
        </button>
      </div>
      } @if (!user) {
      <a
        routerLink="/sign-in"
        class="flex items-center justify-center text-white px-6 py-2 bg-primary-600 rounded-sm hover:bg-primary-700 transition-colors duration-300 gap-1.5 font-medium"
      >
        Se connecter
      </a>
      }
    </div>
  </div>
</div>
