<section class="min-h-fit bg-gradient-to-br from-gray-50 via-white to-gray-50 flex items-center">
  <div class="px-8 lg:px-16 xl:px-24 2xl:px-32 max-w-screen-2xl mx-auto py-14 md:py-24 w-full">
    <div class="flex flex-col items-center justify-center">
      @if (store.isLoading()) {
      <app-product-detail-skeleton />

      } @if (store.product(); as product) {
      <!-- Carte du produit -->
      <div
        class="relative bg-white rounded-3xl shadow-2xl border border-gray-200/50 overflow-hidden max-w-4xl w-full group hover:shadow-3xl transition-all duration-500">
        <!-- Galerie d'images -->
        @if (product.gallery.length >0 ) {
        <div class="relative">
          <p-galleria
            [value]="product.gallery"
            [autoPlay]="true"
            [circular]="true"
            [responsiveOptions]="responsiveOptions"
            [numVisible]="5"
            [showIndicators]="true"
            [showThumbnails]="false"
            [containerStyle]="{ 'max-width': '100%' }"
            class="w-full">
            <ng-template pTemplate="item" let-img>
              <div class="relative w-full overflow-hidden h-80 md:h-[32rem] bg-gray-900">
                <img
                  [src]="img | apiIMG:'gallery'"
                  alt="{{ img.image }}"
                  class="object-cover w-full h-full transition-transform duration-700 group-hover:scale-105" />
                <!-- Overlay gradient -->
                <div
                  class="absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent pointer-events-none"></div>
              </div>
            </ng-template>
          </p-galleria>
        </div>
        }@else {
        <div class="relative w-full overflow-hidden h-80 md:h-[32rem] bg-gray-100">
          <img src="images/no-image.jpg" alt="No image available" class="object-cover w-full h-full opacity-60" />
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"></div>
          <!-- Message "Pas d'image" -->
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="text-center bg-white/90 backdrop-blur-sm rounded-2xl px-8 py-6 shadow-lg">
              <svg class="w-16 h-16 text-gray-400 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              <p class="text-gray-600 font-medium text-lg">Aucune image disponible</p>
            </div>
          </div>
        </div>
        }

        <!-- Badge de prix amélioré -->
        <div
          class="absolute top-6 right-6 bg-gradient-to-br from-primary-500 to-primary-600 shadow-2xl flex flex-col justify-center items-center px-6 py-4 rounded-2xl backdrop-blur-md border-2 border-white/50 transform hover:scale-110 transition-all duration-300">
          <span class="text-white/80 text-xs font-bold uppercase tracking-wider mb-1">Prix</span>
          <p class="text-white text-2xl md:text-3xl font-black drop-shadow-lg">{{ product.price }} $</p>
        </div>
      </div>

      <!-- Informations du produit -->
      <div class="w-full max-w-4xl mt-10 px-4 md:px-8">
        <div
          class="bg-white rounded-2xl shadow-lg border border-gray-200/50 p-8 md:p-10 hover:shadow-xl transition-shadow duration-500">
          <div class="flex items-center gap-4 mb-6">
            <div class="h-1.5 w-16 bg-gradient-to-r from-primary-400 to-primary-600 rounded-full shadow-lg"></div>
            <h3
              class="text-3xl md:text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent">
              {{ product.name }}
            </h3>
          </div>

          <div class="prose prose-lg max-w-none">
            <p class="text-gray-600 text-base md:text-lg leading-relaxed whitespace-pre-line">
              {{ product.description }}
            </p>
          </div>
        </div>
      </div>

      } @else {
      <!-- État vide élégant -->
      <div class="w-full max-w-4xl">
        <div
          class="relative bg-gradient-to-br from-gray-50 via-white to-gray-50 rounded-3xl p-16 md:p-24 text-center border-2 border-dashed border-gray-300 overflow-hidden">
          <!-- Motifs de fond -->
          <div class="absolute top-0 right-0 w-64 h-64 bg-primary-100/20 rounded-full -mr-32 -mt-32 blur-3xl"></div>
          <div class="absolute bottom-0 left-0 w-64 h-64 bg-primary-100/20 rounded-full -ml-32 -mb-32 blur-3xl"></div>

          <div class="relative z-10">
            <div
              class="w-32 h-32 bg-gradient-to-br from-gray-200 to-gray-300 rounded-full flex items-center justify-center mx-auto mb-8 shadow-xl">
              <svg class="w-16 h-16 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
              </svg>
            </div>
            <h3 class="text-3xl md:text-4xl font-black text-gray-800 mb-4">Produit introuvable</h3>
            <p class="text-gray-600 text-lg max-w-md mx-auto">
              Désolé, nous n'avons pas pu trouver le produit que vous recherchez.
            </p>
          </div>
        </div>
      </div>
      }
    </div>
  </div>
</section>
