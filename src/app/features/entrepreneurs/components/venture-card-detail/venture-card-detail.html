<section class="relative min-h-screen bg-[#F8FAFC]">
  <div class="absolute inset-0 overflow-hidden -z-10 pointer-events-none">
    <div class="absolute top-0 left-1/4 w-96 h-96 bg-primary-100/40 rounded-full blur-[120px]"></div>
    <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-indigo-100/30 rounded-full blur-[120px]"></div>
    <div
      class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-[0.03]"></div>
  </div>

  @if (store.isLoading()) {
  <app-venture-card-skeleton />
  } @if (store.venture(); as venture) {
  <header class="relative h-[85vh] w-full overflow-hidden">
    <div class="absolute inset-0 scale-105 animate-pulse-slow">
      <img
        [ngSrc]="venture | apiIMG:'ventureCover'"
        fill
        alt="{{ venture.name }}"
        class="object-cover w-full h-full brightness-[0.7] contrast-[1.1]"
        priority />
    </div>

    <div class="absolute inset-0 bg-gradient-to-t from-[#0F172A] via-transparent to-[#0F172A]/40"></div>

    <div class="relative h-full max-w-7xl mx-auto px-6 flex flex-col justify-end pb-32">
      <div class="flex flex-col lg:flex-row lg:items-end justify-between gap-8">
        <div class="max-w-4xl space-y-6">
          <div
            class="inline-flex items-center px-3 py-1 rounded-full bg-primary-500/20 backdrop-blur-md border border-primary-400/30">
            <span class="size-2 rounded-full bg-primary-400 animate-ping mr-2"></span>
            <span class="text-primary-100 text-xs font-bold uppercase tracking-[0.3em]"> {{ venture.sector }} </span>
          </div>

          <h1 class="text-6xl md:text-8xl font-black text-white tracking-tighter leading-[0.9]">{{ venture.name }}</h1>

          <div class="flex flex-wrap items-center gap-6 text-slate-300">
            <div class="flex items-center gap-2 group">
              <div class="p-2 rounded-full bg-white/10 group-hover:bg-primary-500/20 transition-colors">
                <i-lucide [name]="icons.globe" class="size-5" />
              </div>
              <span class="text-lg font-medium tracking-tight">{{ venture.location }}</span>
            </div>
            <div class="h-8 w-px bg-white/20 hidden md:block"></div>
            <div class="flex items-center gap-2">
              <span class="text-slate-600 uppercase text-xs font-bold tracking-widest">Stage:</span>
              <span class="text-white font-bold bg-white/10 px-3 py-1 rounded-lg backdrop-blur-sm">
                {{ venture.stage }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="absolute bottom-10 left-10 hidden xl:flex items-center gap-4 text-white/50">
      <span class="text-xs font-bold uppercase tracking-[0.4em] [writing-mode:vertical-lr]">Scroll</span>
      <div class="w-px h-12 bg-gradient-to-b from-white/50 to-transparent"></div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-6 lg:px-12 -mt-24 relative z-30 pb-32">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-10">
      <aside class="lg:col-span-4 space-y-8">
        <div
          class="bg-white rounded-lg p-8 shadow-[0_20px_50px_rgba(0,0,0,0.05)] border border-slate-200/60 relative overflow-hidden group">
          <div
            class="absolute top-0 right-0 w-32 h-32 bg-primary-50 rounded-full -mr-16 -mt-16 transition-transform group-hover:scale-150 duration-700"></div>

          <div class="relative flex flex-col items-center">
            <div class="size-36 rounded-2xl bg-slate-50 p-6 ring-1 ring-slate-100 shadow-inner mb-8 overflow-hidden">
              @if (venture.logo) {
              <img
                [src]="venture | apiIMG:'venture'"
                alt="{{ venture.name }} logo"
                class="w-full h-full object-contain" />
              } @else {
              <i-lucide [name]="icons.building" class="size-full text-slate-200" />
              }
            </div>

            <div class="text-center">
              <h3 class="text-xs font-black uppercase tracking-[0.3em] text-primary-500 mb-4">About the Venture</h3>
              <p class="text-slate-600 leading-relaxed text-[15px] font-medium">{{ venture.description }}</p>
            </div>

            <div class="grid grid-cols-2 gap-3 w-full mt-10">
              @if (venture.website) {
              <a
                [href]="venture.website"
                target="_blank"
                class="flex flex-col items-center p-4 rounded-2xl bg-slate-50 hover:bg-primary-500 hover:text-white transition-all group/l">
                <i-lucide [name]="icons.globe" class="size-5 mb-2" />
                <span class="text-xs font-bold uppercase">Website</span>
              </a>
              } @if (venture.linkedin_url) {
              <a
                [href]="venture.linkedin_url"
                target="_blank"
                class="flex flex-col items-center p-4 rounded-2xl bg-slate-50 hover:bg-[#0077b5] hover:text-white transition-all group/l">
                <i-lucide [name]="icons.linkedin" class="size-5 mb-2" />
                <span class="text-xs font-bold uppercase">LinkedIn</span>
              </a>
              }
            </div>
          </div>
        </div>
      </aside>

      <div class="lg:col-span-8 space-y-12">
        <section class="bg-white rounded-lg p-4 shadow-sm border border-slate-200/60">
          @if (venture.gallery && venture.gallery.length) {
          <p-galleria
            [value]="venture.gallery"
            [circular]="true"
            [showIndicators]="true"
            [showItemNavigators]="true"
            [containerStyle]="{'border-radius': '1.5rem', 'overflow': 'hidden'}">
            <ng-template pTemplate="item" let-img>
              <div class="aspect-[16/9] w-full">
                <img
                  [src]="img | apiIMG:'gallery'"
                  alt="{{ venture.name }} gallery image"
                  class="object-cover w-full h-full" />
              </div>
            </ng-template>
          </p-galleria>
          }
        </section>

        <section class="grid md:grid-cols-2 gap-6">
          <div class="bg-[#FFF7ED] rounded-lg p-8 border border-orange-100 group">
            <div
              class="size-12 rounded-2xl bg-orange-500 text-white flex items-center justify-center mb-6 shadow-lg shadow-orange-200">
              <i-lucide [name]="icons.building" class="size-6" />
            </div>
            <h4 class="text-lg font-black text-orange-950 uppercase tracking-tight mb-3">The Problem</h4>
            <p class="text-orange-900/70 font-medium leading-relaxed">{{ venture.problem_solved }}</p>
          </div>

          <div class="bg-[#F0FDF4] rounded-lg p-8 border border-green-100">
            <div
              class="size-12 rounded-2xl bg-primary-500 text-white flex items-center justify-center mb-6 shadow-lg shadow-green-200">
              <i-lucide [name]="icons.trendingUp" class="size-6" />
            </div>
            <h4 class="text-lg font-black text-green-950 uppercase tracking-tight mb-3">Market Opportunity</h4>
            <p class="text-green-900/70 font-medium leading-relaxed">{{ venture.target_market }}</p>
          </div>
        </section>

        <section class="space-y-8">
          <div class="flex items-end justify-between border-b border-slate-200 pb-6">
            <div>
              <h2 class="text-4xl font-black text-slate-900 tracking-tighter">Marketplace</h2>
              <p class="text-slate-500 font-medium">Explorez les solutions de {{ venture.name }}</p>
            </div>
            <div class="hidden md:flex gap-2">
              <div class="px-4 py-2 rounded-full bg-slate-100 text-xs font-black uppercase text-slate-600">
                Products: {{ products().length }}
              </div>
            </div>
          </div>

          @if (hasProducts()) {
          <div class="grid sm:grid-cols-2 gap-6">
            @for (product of products(); track product.id) {
            <div
              class="group bg-white rounded-lg border border-slate-200/60 overflow-hidden hover:shadow-[0_30px_60px_-15px_rgba(0,0,0,0.1)] transition-all duration-500 hover:-translate-y-2">
              <div class="relative h-72 overflow-hidden">
                <img
                  [src]="product?.gallery?.[0] | apiIMG:'gallery'"
                  alt="{{ product.name }}"
                  class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" />

                <div
                  class="absolute top-4 right-4 bg-white/90 backdrop-blur-md px-4 py-2 rounded-2xl shadow-sm border border-white/20">
                  <span class="text-xl font-black text-slate-900">{{ product.price }}</span>
                  <span class="text-sm font-bold text-primary-500 ml-1">$</span>
                </div>
              </div>

              <div class="p-8">
                <h4 class="text-xl font-black text-slate-900 mb-2 group-hover:text-primary-600 transition-colors">
                  {{ product.name }}
                </h4>
                <p class="text-slate-500 text-sm line-clamp-2 mb-8 font-medium leading-relaxed">
                  {{ product.description }}
                </p>

                <button
                  [routerLink]="[product.slug]"
                  class="w-full py-4 rounded-lg bg-slate-900 text-white text-xs font-black uppercase tracking-[0.2em] hover:bg-primary-600 transition-all flex items-center justify-center gap-3 group/btn">
                  Voir le produit
                  <i-lucide
                    [name]="icons.moveRight"
                    class="size-4 group-hover/btn:translate-x-2 transition-transform" />
                </button>
              </div>
            </div>
            }
          </div>
          } @else {
          <div class="bg-white rounded-lg border-2 border-dashed border-slate-200 p-20 text-center">
            <div class="size-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-6">
              <i-lucide [name]="icons.building" class="size-10 text-slate-300" />
            </div>
            <h3 class="text-xl font-black text-slate-900 mb-2">Catalogue vide</h3>
            <p class="text-slate-500">Les produits de cette entreprise arrivent tr√®s prochainement.</p>
          </div>
          }
        </section>
      </div>
    </div>
  </main>
  }
</section>
