<section
  class="lg:flex-row min-h-full gap-8 lg:gap-10 pt-20 pb-15 px-4 sm:px-6 md:px-10 lg:px-16 xl:px-24 2xl:px-32 max-w-screen-2xl mx-auto bg-grid"
>
  @if (store.isLoading()) {
    <div
      class="mt-8 grid grid-cols-1 gap-x-5 gap-y-10 md:grid-cols-2 lg:grid-cols-3 pb-10"
    >
      @for (i of [1, 2, 3, 4, 5, 6]; track $index) {
        <app-subprogram-card-skeleton />
      }
    </div>
  } @else if (store.subprogram()) {
    @if (store.subprogram(); as program) {
      <div class="w-full z-10">
        <div class="lg:sticky lg:top-28 space-y-6">
          <div
            class="flex flex-col gap-6 bg-white rounded-md shadow p-4 sm:p-6"
          >
            <h3
              class="font-black flex font-satoshi mb-1 text-xl sm:text-2xl md:text-3xl lg:text-4xl items-center gap-3 sm:gap-4 lg:gap-6"
            >
              <i-lucide
                [name]="icons.program"
                class="size-5 sm:size-6 lg:size-8"
              />
              {{ program.name | titlecase }}
            </h3>

            <p class="text-gray-600 md:text-lg sm:text-base hyphens-none">
              {{ program.description }}
            </p>
          </div>
        </div>
      </div>

      <div class="lg:mt-0">
        <div class="my-6 sm:my-10">
          <div class="my-10">
            <h3
              class="text-3xl sm:text-4xl lg:text-5xl font-black font-satoshi mb-3 tracking-tight leading-tight"
            >
              Activités de
              <span class="text-primary-400">{{
                program.name | titlecase
              }}</span>
            </h3>
          </div>

          <!-- Sectioon activity for sub-programs  -->

          <div class="flex items-center gap-4 place-self-end">
            <button
              (click)="carousel.navBackward($event)"
              class="carousel-nav-btn"
              type="button"
            >
              <i-lucide [name]="icons.moveLeft" class="size-3.5" />
            </button>
            <button
              (click)="carousel.navForward($event)"
              class="carousel-nav-btn"
              type="button"
            >
              <i-lucide [name]="icons.moveRight" class="size-3.5" />
            </button>
          </div>

          @if (store.isLoading()) {
            <div
              class="mt-8 grid grid-cols-1 gap-x-5 gap-y-10 md:grid-cols-2 lg:grid-cols-3 pb-10"
            >
              @for (i of [1, 2, 3, 4, 5, 6]; track $index) {
                <app-subprogram-card-skeleton />
              }
            </div>
          }

          <div class="flex flex-col gap-5">
            <p-carousel
              #carousel
              [value]="program.projects"
              [numVisible]="1"
              [numScroll]="1"
              [showIndicators]="false"
              [showNavigators]="false"
              [circular]="true"
              [responsiveOptions]="carouselOptions"
              [autoplayInterval]="5000"
            >
              <ng-template let-project #item>
                <div class="mr-3.5">
                  <app-subprogram-card [project]="project" />
                </div>
              </ng-template>
            </p-carousel>
          </div>

          <div class="my-10">
            <h3
              class="text-3xl sm:text-4xl lg:text-5xl font-black font-satoshi mb-3 tracking-tight leading-tight"
            >
              Evénements de
              <span class="text-primary-400">{{
                program.name | titlecase
              }}</span>
            </h3>
          </div>

          <div class="flex items-center gap-4 place-self-end">
            <button
              (click)="eventCarousel.navBackward($event)"
              class="carousel-nav-btn"
              type="button"
            >
              <i-lucide [name]="icons.moveLeft" class="size-3.5" />
            </button>
            <button
              (click)="eventCarousel.navForward($event)"
              class="carousel-nav-btn"
              type="button"
            >
              <i-lucide [name]="icons.moveRight" class="size-3.5" />
            </button>
          </div>

          <div class="flex flex-col gap-5">
            <p-carousel
              #eventCarousel
              [value]="program.events"
              [numVisible]="1"
              [numScroll]="1"
              [showIndicators]="false"
              [showNavigators]="false"
              [circular]="true"
              [responsiveOptions]="carouselOptions"
              [autoplayInterval]="5000"
            >
              <ng-template let-event #item>
                <div class="mr-3.5">
                  <app-subprogram-event-card [event]="event" />
                </div>
              </ng-template>
            </p-carousel>
          </div>
        </div>
      </div>
    }
  } @else if (!store.isLoading() && !store.subprogram()) {
    <div
      class="min-h-[75vh] w-full flex flex-col justify-center items-center px-4"
    >
      <h2 class="text-2xl sm:text-3xl font-semibold">Mauvais chemin !</h2>
    </div>
  }
</section>
