<section
  class="lg:flex-row min-h-full gap-10 pt-20 md:pb-28 px-8 md:px-10 lg:px-16 xl:px-24 2xl:px-32 max-w-screen-2xl mx-auto bg-grid">
  @if (store.isLoading()) {
  <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-12 md:grid-cols-2 lg:grid-cols-3 pb-10">
    <app-subprogram-card-skeleton />
  </div>
  } @else if (store.subprogram()) { @if (store.subprogram(); as program) {
  <div class="w-full space-y-12 md:space-y-16 lg:space-y-20">
    <div
      class="flex flex-col gap-6 rounded-lg p-6 sm:p-8 bg-white/20 shadow-sm border backdrop-blur-[2px] border-slate-200 mt-10">
      <h3 class="font-black flex items-center gap-4 sm:gap-6 font-satoshi text-xl sm:text-2xl md:text-3xl lg:text-4xl">
        <i-lucide [name]="icons.program" class="size-5 sm:size-6 lg:size-8" />
        {{ program.name | titlecase }}
      </h3>
      <div class="mt-0.5 line-clamp-2 break-all">{{ program.description }}</div>
    </div>

    @if (program.projects && program.projects.length > 0) {
    <div class="space-y-6">
      <h3 class="text-3xl sm:text-4xl lg:text-5xl font-black font-satoshi tracking-tight leading-tight">
        Projets de
        <span class="text-primary-400">{{ program.name | titlecase }}</span>
      </h3>
      <div class="flex items-center gap-4 mb-4">
        <button (click)="carousel.navBackward($event)" class="carousel-nav-btn" type="button">
          <i-lucide [name]="icons.moveLeft" class="size-3.5" />
        </button>
        <button (click)="carousel.navForward($event)" class="carousel-nav-btn" type="button">
          <i-lucide [name]="icons.moveRight" class="size-3.5" />
        </button>
      </div>
      @if (store.isLoading()) {
      <div class="mt-6 grid grid-cols-1 gap-x-6 gap-y-12 md:grid-cols-2 lg:grid-cols-3 pb-10">
        <app-subprogram-card-skeleton />
      </div>
      }
      <div class="flex flex-col gap-6">
        <p-carousel
          #carousel
          [value]="program.projects"
          [numVisible]="1"
          [numScroll]="1"
          [showIndicators]="false"
          [showNavigators]="false"
          [circular]="true"
          [responsiveOptions]="carouselOptions"
          [autoplayInterval]="5000">
          <ng-template let-project #item>
            <app-subprogram-card [project]="project" />
          </ng-template>
        </p-carousel>
      </div>
    </div>
    } @if (program.events && program.events.length > 0) {
    <div class="space-y-6">
      <h3 class="text-3xl sm:text-4xl lg:text-5xl font-black font-satoshi tracking-tight leading-tight">
        Événements de
        <span class="text-primary-400">{{ program.name | titlecase }}</span>
      </h3>
      <div class="flex items-center gap-4 mb-4">
        <button (click)="eventCarousel.navBackward($event)" class="carousel-nav-btn" type="button">
          <i-lucide [name]="icons.moveLeft" class="size-3.5" />
        </button>
        <button (click)="eventCarousel.navForward($event)" class="carousel-nav-btn" type="button">
          <i-lucide [name]="icons.moveRight" class="size-3.5" />
        </button>
      </div>
      <div class="flex flex-col gap-6">
        <p-carousel
          #eventCarousel
          [value]="program.events"
          [numVisible]="1"
          [numScroll]="1"
          [showIndicators]="false"
          [showNavigators]="false"
          [circular]="true"
          [responsiveOptions]="carouselOptions"
          [autoplayInterval]="5000">
          <ng-template let-event #item>
            <div class="p-2">
              <app-subprogram-event-card [event]="event" />
            </div>
          </ng-template>
        </p-carousel>
      </div>
    </div>
    }
  </div>
  } } @else if (!store.isLoading() && !store.subprogram()) {
  <div class="min-h-[75vh] w-full flex flex-col justify-center items-center px-4">
    <h2 class="text-2xl sm:text-3xl font-semibold">Mauvais chemin !</h2>
  </div>
  }
</section>
