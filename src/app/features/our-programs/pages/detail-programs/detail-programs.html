<body class="flex flex-col min-h-screen">
  <main class="flex-1 flex flex-col">
    <section
      class="flex flex-col lg:flex-row flex-1 gap-8 lg:gap-10 pt-28 pb-16 px-8 md:px-10 lg:px-16 xl:px-24 2xl:px-32 max-w-screen-2xl mx-auto w-full bg-grid">
      @if (store.isLoading()) { @for (i of [1]; track i) {
      <div class="transition-all duration-300">
        <app-subprogram-card-skeleton />
      </div>
      } } @if (store.program(); as program) {
      <div class="w-full lg:w-1/3">
        <div class="space-y-6">
          <div
            class="flex flex-col gap-6 rounded-md bg-neutral-100/10 backdrop-blur-[1px] border border-gray-100 p-4 sm:p-6">
            <h3
              class="font-black flex font-satoshi mb-1 text-xl sm:text-2xl md:text-3xl lg:text-4xl items-center gap-3 sm:gap-4 lg:gap-6">
              <div class="relative w-10 h-10 md:w-15 md:h-15 rounded-full overflow-hidden">
                <img
                  [ngSrc]="program | apiIMG: 'program'"
                  alt="logo du sous programme {{ program.name }}"
                  class="relative object-cover w-full h-full transition-transform duration-300 hover:scale-105"
                  loading="lazy"
                  fill />
              </div>

              {{ program.name | titlecase }}
            </h3>
            <p class="text-gray-600 text-sm hyphens-none">{{ program.description }}</p>
          </div>
        </div>
      </div>

      <div class="w-full lg:w-2/3 lg:mt-0">
        <h3
          class="text-3xl sm:text-4xl lg:text-5xl font-black font-satoshi mb-5 md:mb-8 lg:mb-12 tracking-tight leading-tight">
          Programmes li√©s
        </h3>

        @if (program.subprograms.length > 0) {
        <div class="grid sm:grid-cols-2 gap-4 sm:gap-6">
          @for (sub of program.subprograms; track $index) {
          <div
            class="space-y-3 sm:space-y-4 p-4 sm:p-5 hover:shadow-md transition bg-white/20 shadow-sm border backdrop-blur-[2px] border-slate-200 rounded-md">
            <h3 class="font-semibold text-gray-800 flex items-center gap-2">
              <div class="relative w-8 h-8 md:w-10 md:h-10 rounded-full overflow-hidden">
                <img
                  [ngSrc]="sub | apiIMG: 'subprogram'"
                  alt="logo du sous programme {{ sub.name }}"
                  class="relative object-cover w-full h-full transition-transform duration-300 hover:scale-105"
                  loading="lazy"
                  fill />
              </div>
              <h3>{{ sub.name }}</h3>
              <p class="text-gray-500 text-sm sm:text-base line-clamp-3">{{ sub.description }}</p>
            </h3>
            <p class="text-gray-500 text-sm sm:text-base line-clamp-3">{{ sub.description }}</p>
            <article class="before:content-['\A'] before:whitespace-pre" [innerHTML]="sub.description" ]></article>

            <p-button [routerLink]="sub.slug" size="small" outlined severity="primary">
              <p class="flex items-center gap-2 group px-4">
                Savoir plus
                <i-lucide
                  class="size-4 group-hover:translate-x-0.5 transition-transform duration-300"
                  [name]="icons.arrow" />
              </p>
            </p-button>
          </div>
          }
        </div>
        } @else {
        <div class="grid sm:grid-cols-2 gap-4 sm:gap-6">
          <div
            class="space-y-3 sm:space-y-4 p-4 sm:p-5 hover:shadow-md transition bg-white/20 shadow-sm border backdrop-blur-[2px] border-slate-200 rounded-md">
            <h3 class="font-semibold text-gray-800 flex items-center gap-2">
              <i-lucide [name]="icons.tag" class="size-4" />
              Aucun sous-programme
            </h3>
          </div>
        </div>
        }
      </div>
      } @if (!store.isLoading() && !store.program()) {
      <div class="w-full flex flex-col justify-center items-center px-4">
        <app-subprogram-card-skeleton />
        <h2 class="text-2xl sm:text-4xl font-black font-satoshi text-gray-700 mt-8">Mauvais chemin !</h2>
      </div>
      }
    </section>
  </main>
</body>
