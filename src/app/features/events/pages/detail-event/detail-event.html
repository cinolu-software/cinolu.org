<section class="px-6 lg:px-16 xl:px-24 2xl:px-32 max-w-screen-2xl mx-auto bg-grid pt-[7.5rem] pb-16">
  @if (store.event(); as event) {
  <div class="space-y-12">
    <div class="text-center">
      <h2 class="font-black font-satoshi text-3xl md:text-4xl text-gray-900 leading-tight">
        {{ event.name | titlecase }}
      </h2>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
      <div>
        @if (event.gallery && event.gallery.length > 0) {
        <p-galleria
          [value]="event.gallery"
          [autoPlay]="true"
          [circular]="true"
          [responsiveOptions]="responsiveOptions"
          [numVisible]="5"
          [containerStyle]="{ 'max-width': '640px' }">
          <ng-template pTemplate="item" let-img>
            <div class="relative w-full overflow-hidden h-72 md:h-[27rem]">
              <img
                [src]="img | apiIMG: 'gallery'"
                [alt]="img.image"
                class="relative object-cover w-full h-full block transition-transform duration-300 hover:scale-105"
                priority />
            </div>
          </ng-template>

          <ng-template pTemplate="thumbnail" let-img>
            <img [src]="img | apiIMG: 'gallery'" [alt]="img.image" class="relative object-cover h-20 w-20" />
          </ng-template>
        </p-galleria>
        } @else {
        <div class="relative w-full overflow-hidden h-72 md:h-[34rem]">
          <img
            [src]="event | apiIMG: 'event'"
            [alt]="event.name"
            class="relative object-cover w-full h-full block transition-transform duration-300 hover:scale-105"
            priority />
        </div>
        }
      </div>

      <div class="flex flex-col gap-5">
        <div
          class="relative group bg-white/60 backdrop-blur-md border border-primary-100/50 rounded-lg p-6 hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
          <div
            class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-primary-500 to-primary-400 rounded-t-lg"></div>

          <div class="flex items-center gap-3 mb-4">
            <div
              class="flex items-center justify-center w-12 h-12 rounded-xl bg-primary-500/10 text-primary-600 group-hover:bg-primary-500/20 transition-colors">
              <i-lucide [name]="icons.calendarDays" class="size-6 stroke-[1.5]" />
            </div>
            <h3 class="font-semibold text-xl text-gray-800">Dates</h3>
          </div>

          <div class="space-y-4">
            <p class="text-gray-700 text-base flex items-center gap-3">
              <i-lucide [name]="icons.calendarDays" class="size-5 stroke-[1.5] text-primary-500" />
              <span class="font-medium text-gray-900">Début :</span>
              <span>{{ event.started_at | date: 'longDate' }}</span>
            </p>

            <p class="text-gray-700 text-base flex items-center gap-3">
              <i-lucide [name]="icons.calendarCheck" class="size-5 stroke-[1.5] text-red-500" />
              <span class="font-medium text-gray-900">Fin :</span>
              <span>{{ event.ended_at | date: 'longDate' }}</span>
            </p>
          </div>
        </div>

        <div
          class="relative group border border-green-200 bg-white/80 rounded-lg p-6 hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
          <div class="flex items-center gap-3 mb-6">
            <div
              class="flex items-center justify-center w-12 h-12 rounded-xl bg-green-500/10 text-green-600 group-hover:bg-green-500/20 transition-colors">
              <i-lucide [name]="icons.tag" class="size-6 stroke-[1.5]" />
            </div>
            <h3 class="font-semibold text-xl text-gray-800">Catégories</h3>
          </div>

          <div class="flex flex-wrap gap-3">
            @for (item of event.categories; track $index) {
            <span
              class="px-4 py-1.5 text-sm font-medium rounded-full bg-white border border-gray-200 shadow-sm text-gray-700 hover:bg-gray-50 transition">
              {{ item.name }}
            </span>
            }
          </div>
        </div>

        <div
          class="relative group bg-white/30 backdrop-blur-md border border-gray-200 rounded-lg p-6 hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
          <div class="flex items-center gap-3 mb-6">
            <div
              class="flex items-center justify-center bg-amber-50 group-hover:bg-amber-100 w-12 h-12 rounded-xl text-primary-600">
              <i-lucide [name]="icons.mapPin" class="size-6 stroke-[1.5]" />
            </div>
            <h3 class="font-semibold text-xl text-gray-800">Adresse</h3>
          </div>
          <quill-view class="hyphens-none" [content]="event.place" />
        </div>
      </div>
    </div>
    <div class="flex flex-col justify-center items-center gap-6 mt-10 w-full m-auto bg-gray-50 rounded-lg p-2 md:p-8">
      <div class="w-full p-2 md:p-6">
        <div class="flex items-center gap-3 mb-6">
          <div class="flex items-center justify-center w-12 h-12 rounded-xl bg-primary-100 text-primary-600">
            <i-lucide [name]="icons.fileText" class="size-6 stroke-[1.5]" />
          </div>
          <h3 class="font-semibold text-xl text-gray-800">Description</h3>
        </div>
        <quill-view
          [content]="event.description"
          class="hyphens-none! text-base font-satoshi text-justify! break-words flex flex-col gap-1" />
      </div>

      @if (getStatut(event) === 'En cours' || (getStatut(event) === 'À venir' && event.link)) {
      <p-button
        size="large"
        severity="primary"
        class="flex items-center gap-3 px-6 lg:px-8 py-3 group rounded-lg transition-all duration-300">
        Postuler Maintenant
        <i-lucide class="size-5 group-hover:translate-x-1 transition-transform duration-300" [name]="icons.arrow" />
      </p-button>
      } @else {
      <div class="flex flex-col items-center gap-4">
        <h3 class="text-xl font-semibold text-gray-700">Événement terminé</h3>
        <p-button
          size="large"
          severity="danger"
          disabled
          class="flex items-center gap-3 px-6 py-3 rounded-lg opacity-70 cursor-not-allowed">
          <i-lucide class="size-5" [name]="icons.fileLock" />
          Postuler Maintenant
        </p-button>
      </div>
      }
    </div>
  </div>
  } @if (store.isLoading()) {
  <app-event-skeleton />
  } @if (!store.isLoading() && !store.event()) {
  <div class="min-h-[75vh] w-full flex flex-col justify-center items-center">
    <h2 class="text-3xl font-semibold text-gray-700">Aucun événement avec cet identifiant !</h2>
  </div>
  }
</section>
